# План функционального тестирования ПО

| | |
|---|---|
| **Продукт** | [ЗАПОЛНИТЬ: наименование СЗИ] |
| **Версия документа** | 1.0 |
| **Дата** | [ЗАПОЛНИТЬ: дата утверждения] |
| **Статус** | Проект |
| **Утверждено** | [ЗАПОЛНИТЬ: должность, ФИО руководителя] |
| **Процесс ГОСТ Р 56939-2024** | 5.18 — Функциональное тестирование ПО |

---

## Содержание

1. [Общие сведения](#1-общие-сведения)
2. [Область применения](#2-область-применения)
3. [Инструменты тестирования](#3-инструменты-тестирования)
4. [Стратегия тестирования](#4-стратегия-тестирования)
5. [Матрица покрытия требований безопасности](#5-матрица-покрытия-требований-безопасности)
6. [Порядок проведения тестирования](#6-порядок-проведения-тестирования)
7. [Тестирование функций безопасности](#7-тестирование-функций-безопасности)
8. [Управление тестовыми данными](#8-управление-тестовыми-данными)
9. [Критерии приёмки](#9-критерии-приёмки)
10. [Регрессионное тестирование](#10-регрессионное-тестирование)
11. [Интеграция в CI/CD](#11-интеграция-в-cicd)
12. [Метрики и отчётность](#12-метрики-и-отчётность)
13. [Реестр результатов тестирования](#13-реестр-результатов-тестирования)
14. [История изменений](#14-история-изменений)

---

## 1. Общие сведения

### 1.1. Назначение документа

Настоящий План определяет порядок:

- Планирования и организации функционального тестирования программного обеспечения средства защиты информации.
- Составления тест-кейсов для проверки функций безопасности (аутентификация, управление доступом, валидация ввода, криптография, журналирование, управление сессиями).
- Проведения тестирования механизмов защиты на соответствие требованиям безопасности (документ 05).
- Регистрации хода тестирования, фиксации результатов и управления дефектами.
- Обеспечения трассируемости тест-кейсов к требованиям безопасности и результатам экспертизы кода.
- Интеграции функционального тестирования в CI/CD pipeline для обеспечения непрерывной верификации.
- Управления тестовыми данными с учётом требований безопасности.

План разработан в соответствии с требованиями ГОСТ Р 56939-2024, п. 5.18 (функциональное тестирование ПО) и п. 5.18.2, которые устанавливают необходимость:

- Разработать план функционального тестирования.
- Составить тест-кейсы для функций безопасности.
- Провести тестирование механизмов защиты.
- Регистрировать ход тестирования и фиксировать результаты.

### 1.2. Нормативные ссылки

| Документ | Описание |
|----------|----------|
| ГОСТ Р 56939-2024, п. 5.18 | Функциональное тестирование ПО — основной процесс |
| ГОСТ Р 56939-2024, п. 5.18.2 | Требования к процессу функционального тестирования |
| ГОСТ Р 56939-2024, п. 5.19 | Нефункциональное тестирование ПО — дополняет функциональное тестирование |
| ГОСТ Р 56939-2024, п. 5.3 | Управление конфигурацией — контроль версий тестовых артефактов |
| ГОСТ Р 56939-2024, п. 5.5 | Управление недостатками — регистрация дефектов, обнаруженных при тестировании |
| OWASP ASVS (Application Security Verification Standard) | Фреймворк верификации безопасности приложений; определяет требования к функциям безопасности по уровням |
| ISO/IEC/IEEE 29119 | Стандарт тестирования ПО — процессы, документация, техники, метрики |
| ISTQB Syllabus | Международный стандарт квалификации тестировщиков — терминология, техники, процессы |
| CWE Top 25 | Наиболее опасные уязвимости ПО — источник тест-кейсов для функций безопасности |
| OWASP Testing Guide | Руководство по тестированию безопасности веб-приложений |

### 1.3. Связь с другими документами комплекта РБПО

| Документ РБПО | Связь |
|----------------|-------|
| 04 — Регламент управления недостатками | Дефекты, обнаруженные при функциональном тестировании, регистрируются как недостатки безопасности (процесс 5.5). Критичные дефекты блокируют выпуск |
| 05 — Требования безопасности | Функциональное тестирование верифицирует выполнение требований безопасности. Матрица покрытия (раздел 5) обеспечивает трассируемость тест-кейсов к требованиям |
| 09 — Регламент статического анализа | Результаты SAST формируют дополнительные тест-кейсы: найденные потенциальные уязвимости верифицируются функциональными тестами (процесс 5.10) |
| 10 — Регламент динамического анализа | Динамический анализ (DAST) дополняет функциональное тестирование — DAST обнаруживает уязвимости runtime, функциональные тесты проверяют бизнес-логику безопасности (процесс 5.11) |
| 08 — Регламент экспертизы кода | Результаты ручной экспертизы кода могут выявлять области, требующие дополнительных функциональных тестов (процесс 5.9) |
| 18 — Методика нефункционального тестирования | Функциональное и нефункциональное тестирование в совокупности составляют полный цикл тестирования ПО. Функциональные тесты должны быть пройдены перед началом нефункционального тестирования (процесс 5.19) |
| 19 — Руководство по выпуску релизов | Успешное прохождение функциональных тестов — обязательный критерий выпуска релиза |

---

## 2. Область применения

### 2.1. Типы тестирования

Настоящий План охватывает следующие типы функционального тестирования:

| Тип тестирования | Описание | Уровень | Ответственный |
|------------------|----------|---------|---------------|
| **Unit-тестирование** | Тестирование отдельных модулей, функций и классов в изоляции. Покрытие бизнес-логики, граничных условий, обработки ошибок | Компонент | Разработчик |
| **Интеграционное тестирование** | Проверка взаимодействия между модулями, сервисами, API-контрактов, интеграция с внешними системами | Подсистема | Разработчик / QA |
| **Системное тестирование** | End-to-end тестирование полной системы: пользовательские сценарии, бизнес-процессы, функции безопасности в реальном окружении | Система | QA |
| **Приёмочное тестирование** | Верификация соответствия системы требованиям безопасности (документ 05) и критериям приёмки заказчика | Система | QA / Security / Заказчик |

### 2.2. Тестируемые компоненты

| Компонент | Описание | Критичность | Типы тестов |
|-----------|----------|-------------|-------------|
| [ЗАПОЛНИТЬ: например, модуль аутентификации] | [ЗАПОЛНИТЬ: описание] | [ЗАПОЛНИТЬ: Critical / High / Medium] | [ЗАПОЛНИТЬ: unit, integration, system] |
| [ЗАПОЛНИТЬ: модуль управления доступом] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: модуль валидации ввода] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: модуль криптографии] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: модуль журналирования] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: API-слой] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 2.3. Тестовые среды

| Среда | Назначение | Конфигурация | Доступ |
|-------|-----------|-------------|--------|
| **Dev (локальная)** | Unit-тесты и быстрые интеграционные тесты при разработке | Локальная машина разработчика, mock-сервисы | Разработчик |
| **CI/CD** | Автоматический запуск полного набора unit- и интеграционных тестов при каждом push/PR | [ЗАПОЛНИТЬ: GitHub Actions / GitLab CI] runners, контейнеризация | Автоматический |
| **Staging** | Системное и приёмочное тестирование в окружении, максимально приближённом к production | [ЗАПОЛНИТЬ: конфигурация staging-среды] | QA / Security |
| **Security testing** | Изолированная среда для тестирования функций безопасности с реальными конфигурациями | [ЗАПОЛНИТЬ: изолированная сеть, реальные сертификаты] | Security / QA |

### 2.4. Этапы жизненного цикла

| Этап ЖЦ | Тип тестирования | Периодичность |
|---------|------------------|---------------|
| **Разработка** | Unit-тесты | При каждом изменении кода (локально и в CI/CD) |
| **Code review / PR** | Unit + интеграционные тесты | Автоматический запуск при создании/обновлении PR |
| **Подготовка к релизу** | Системное + приёмочное тестирование | Перед каждым релизом |
| **Post-release** | Smoke-тесты + регрессионное тестирование | После развёртывания в production |
| **Периодическая проверка** | Полный цикл тестирования функций безопасности | [ЗАПОЛНИТЬ: ежеквартально / при обновлении требований] |

---

## 3. Инструменты тестирования

### 3.1. Реестр инструментов

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — обеспечить инструментальную поддержку процесса функционального тестирования.

| ID | Инструмент | Назначение | Тип тестирования | Версия | Лицензия | Статус |
|----|-----------|-----------|------------------|--------|----------|--------|
| TL-001 | [ЗАПОЛНИТЬ: pytest] | Unit- и интеграционное тестирование Python-кода | Unit, Integration | [ЗАПОЛНИТЬ] | MIT | [ЗАПОЛНИТЬ: используется / планируется] |
| TL-002 | [ЗАПОЛНИТЬ: Vitest] | Unit- и интеграционное тестирование TypeScript/React-кода | Unit, Integration | [ЗАПОЛНИТЬ] | MIT | [ЗАПОЛНИТЬ] |
| TL-003 | [ЗАПОЛНИТЬ: JUnit 5] | Unit- и интеграционное тестирование Java-кода | Unit, Integration | [ЗАПОЛНИТЬ] | EPL-2.0 | [ЗАПОЛНИТЬ] |
| TL-004 | [ЗАПОЛНИТЬ: Playwright] | End-to-end тестирование веб-приложений | System, Acceptance | [ЗАПОЛНИТЬ] | Apache-2.0 | [ЗАПОЛНИТЬ] |
| TL-005 | [ЗАПОЛНИТЬ: Cypress] | End-to-end и компонентное тестирование | System, Integration | [ЗАПОЛНИТЬ] | MIT | [ЗАПОЛНИТЬ] |
| TL-006 | [ЗАПОЛНИТЬ: coverage.py / c8 / istanbul] | Измерение покрытия кода тестами | Метрики | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| TL-007 | [ЗАПОЛНИТЬ: дополнительные] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 3.2. Критерии выбора инструментов

| Критерий | Описание |
|----------|----------|
| **Совместимость с технологическим стеком** | Инструмент должен поддерживать используемые языки программирования и фреймворки |
| **Интеграция с CI/CD** | Поддержка headless-режима, генерация отчётов в форматах CI/CD (JUnit XML, HTML, JSON) |
| **Поддержка coverage** | Возможность измерения покрытия кода (statement, branch, function, line coverage) |
| **Поддержка параллельного выполнения** | Возможность параллельного запуска тестов для сокращения времени выполнения |
| **Качество документации и сообщества** | Наличие документации, активное сообщество, стабильность развития |
| **Безопасность инструмента** | Инструмент прошёл оценку по регламенту проверки цепочки поставок (документ 16) |

---

## 4. Стратегия тестирования

### 4.1. Подход risk-based

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — тестирование должно покрывать функции безопасности и механизмы защиты.

Стратегия функционального тестирования основана на приоритизации по уровню риска:

| Приоритет | Категория | Описание | Глубина тестирования |
|-----------|-----------|----------|---------------------|
| **P0 — Critical** | Функции безопасности (auth, access control, crypto) | Механизмы защиты, непосредственно влияющие на безопасность продукта | Исчерпывающее тестирование: позитивные, негативные, граничные сценарии, abuse cases |
| **P1 — High** | Обработка пользовательского ввода, API-эндпоинты | Компоненты, обрабатывающие внешние данные и потенциально подверженные атакам | Позитивные и негативные сценарии, граничные значения, fuzzing-like input |
| **P2 — Medium** | Бизнес-логика, интеграции | Основная функциональность продукта без прямого влияния на безопасность | Основные позитивные сценарии, ключевые негативные сценарии |
| **P3 — Low** | Вспомогательные функции, UI | Функции, не влияющие на безопасность и не обрабатывающие критичные данные | Smoke-тесты, основные позитивные сценарии |

### 4.2. Тестовая пирамида

| Уровень пирамиды | Доля тестов | Время выполнения | Стабильность |
|-------------------|-------------|-----------------|-------------|
| **Unit-тесты** | [ЗАПОЛНИТЬ: ~70%] | Быстро (секунды) | Высокая |
| **Интеграционные тесты** | [ЗАПОЛНИТЬ: ~20%] | Умеренно (минуты) | Средняя |
| **E2E / системные тесты** | [ЗАПОЛНИТЬ: ~10%] | Медленно (минуты–десятки минут) | Ниже средней |

### 4.3. Приоритизация тест-кейсов

| Фактор | Описание | Влияние на приоритет |
|--------|----------|---------------------|
| **Критичность компонента** | Уровень критичности тестируемого компонента (из раздела 2.2) | Critical/High → P0/P1 тесты |
| **Связь с требованиями безопасности** | Тест-кейс покрывает требование безопасности из документа 05 | Прямая связь → повышение приоритета |
| **История дефектов** | Компонент имеет историю дефектов безопасности | Частые дефекты → повышение приоритета |
| **Результаты SAST/DAST** | Статический или динамический анализ выявил потенциальные проблемы | Наличие findings → дополнительные тесты |
| **Изменения в коде** | Компонент недавно подвергался значительным изменениям | Большой diff → усиленное тестирование |

---

## 5. Матрица покрытия требований безопасности

### 5.1. Трассируемость тест-кейсы — требования

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — составить тест-кейсы для функций безопасности.

Каждый тест-кейс должен быть привязан к одному или нескольким требованиям безопасности из документа 05 (Требования безопасности). Матрица покрытия обеспечивает:

- **Полноту** — каждое требование безопасности покрыто хотя бы одним тест-кейсом.
- **Трассируемость** — для любого дефекта можно определить, какое требование затронуто.
- **Актуальность** — при изменении требований обновляются соответствующие тест-кейсы.

### 5.2. Матрица покрытия

| ID требования (doc 05) | Описание требования | ID тест-кейсов | Тип тестирования | Статус покрытия |
|------------------------|---------------------|---------------|------------------|----------------|
| [ЗАПОЛНИТЬ: REQ-AUTH-001] | [ЗАПОЛНИТЬ: аутентификация по паролю] | [ЗАПОЛНИТЬ: FT-001, FT-002, FT-003] | Unit, Integration, System | [ЗАПОЛНИТЬ: Полное / Частичное / Не покрыто] |
| [ЗАПОЛНИТЬ: REQ-AUTH-002] | [ЗАПОЛНИТЬ: многофакторная аутентификация] | [ЗАПОЛНИТЬ: FT-004, FT-005] | Integration, System | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: REQ-AC-001] | [ЗАПОЛНИТЬ: ролевое управление доступом] | [ЗАПОЛНИТЬ: FT-010, FT-011] | Unit, Integration | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: REQ-INPUT-001] | [ЗАПОЛНИТЬ: валидация пользовательского ввода] | [ЗАПОЛНИТЬ: FT-020, FT-021] | Unit, Integration | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: REQ-CRYPTO-001] | [ЗАПОЛНИТЬ: шифрование данных] | [ЗАПОЛНИТЬ: FT-030, FT-031] | Unit | [ЗАПОЛНИТЬ] |
| [ЗАПОЛНИТЬ: REQ-LOG-001] | [ЗАПОЛНИТЬ: журналирование событий безопасности] | [ЗАПОЛНИТЬ: FT-040, FT-041] | Integration, System | [ЗАПОЛНИТЬ] |

### 5.3. Процедура обновления матрицы

| Событие | Действие | Ответственный |
|---------|----------|---------------|
| Добавление нового требования безопасности | Создание тест-кейсов, добавление в матрицу, проверка покрытия | QA / Security |
| Изменение существующего требования | Обновление связанных тест-кейсов, переверификация | QA |
| Обнаружение непокрытого требования | Создание недостающих тест-кейсов, приоритизация | QA / техлид |
| Удаление требования | Пометка тест-кейсов как deprecated, удаление из матрицы | QA |
| Плановый аудит | Полная ревизия матрицы покрытия | [ЗАПОЛНИТЬ: ежеквартально] |

---

## 6. Порядок проведения тестирования

### 6.1. Этапы процесса

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — регистрировать ход тестирования и фиксировать результаты.

| Этап | Описание | Входные данные | Выходные данные | Ответственный |
|------|----------|---------------|----------------|---------------|
| **1. Подготовка** | Анализ требований, создание/обновление тест-кейсов, подготовка тестовых данных и среды | Требования безопасности (doc 05), матрица покрытия (раздел 5), результаты SAST (doc 09) | Тест-план итерации, готовые тест-кейсы, подготовленные тестовые данные | QA / Security |
| **2. Выполнение** | Запуск тестов (автоматических и ручных), фиксация результатов | Тест-кейсы, тестовая среда, тестовые данные | Raw-результаты тестирования (pass/fail/skip/error) | QA / CI/CD автоматически |
| **3. Регистрация** | Документирование результатов, создание записей в реестре (раздел 13), создание дефектов | Raw-результаты | Заполненный реестр, дефекты в трекере | QA |
| **4. Анализ дефектов** | Классификация дефектов по критичности, определение root cause, назначение исполнителей | Зарегистрированные дефекты | Приоритизированные дефекты, назначенные исполнители | QA / Security / техлид |
| **5. Ретест** | Повторное тестирование после исправления дефектов | Исправленный код, дефекты со статусом Fixed | Подтверждение исправления или повторное открытие дефекта | QA |
| **6. Отчётность** | Формирование отчёта о тестировании, обновление метрик | Реестр результатов, метрики | Отчёт о тестировании | QA |

### 6.2. Классификация дефектов

| Severity | Описание | SLA на исправление | Блокирует релиз |
|----------|----------|-------------------|----------------|
| **Critical** | Дефект в функции безопасности, приводящий к обходу механизма защиты (bypass auth, privilege escalation, data leak) | [ЗАПОЛНИТЬ: ≤ 24 часа] | Да |
| **High** | Дефект в функции безопасности с ограниченным воздействием или при определённых условиях | [ЗАПОЛНИТЬ: ≤ 3 рабочих дня] | Да |
| **Medium** | Дефект функциональности, не связанной напрямую с безопасностью, но влияющий на корректность работы | [ЗАПОЛНИТЬ: ≤ 7 рабочих дней] | По решению техлида |
| **Low** | Косметические дефекты, незначительные отклонения от ожидаемого поведения | [ЗАПОЛНИТЬ: следующий спринт] | Нет |

### 6.3. Связь с управлением недостатками

Все дефекты, обнаруженные при функциональном тестировании, регистрируются в соответствии с регламентом управления недостатками (документ 04, процесс 5.5):

| Поле дефекта | Описание | Пример |
|-------------|----------|--------|
| **ID** | Уникальный идентификатор дефекта | DEF-2024-042 |
| **Источник** | Функциональное тестирование (процесс 5.18) | FT — Functional Testing |
| **Связанный тест-кейс** | ID тест-кейса, обнаружившего дефект | FT-001 |
| **Связанное требование** | ID требования безопасности (документ 05) | REQ-AUTH-001 |
| **Severity** | Критичность дефекта (Critical / High / Medium / Low) | Critical |
| **Описание** | Детальное описание дефекта: шаги воспроизведения, ожидаемый и фактический результат | — |
| **Среда** | Тестовая среда, в которой обнаружен дефект | Staging, version 1.2.3 |

---

## 7. Тестирование функций безопасности

### 7.1. Аутентификация

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — провести тестирование механизмов защиты.

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-AUTH-001 | Успешная аутентификация с корректными учётными данными | Позитивный | Пользователь аутентифицирован, получен токен/сессия |
| FT-AUTH-002 | Аутентификация с неверным паролем | Негативный | Отказ в доступе, сообщение без раскрытия деталей (не указывать, что именно неверно) |
| FT-AUTH-003 | Аутентификация с несуществующим пользователем | Негативный | Отказ в доступе, время отклика не отличается от FT-AUTH-002 (защита от timing attack) |
| FT-AUTH-004 | Блокировка учётной записи после N неудачных попыток | Негативный | Учётная запись заблокирована после [ЗАПОЛНИТЬ: N] попыток |
| FT-AUTH-005 | Тестирование сложности пароля (минимальная длина, символы) | Негативный | Отклонение паролей, не соответствующих политике |
| FT-AUTH-006 | Тестирование истечения срока действия токена/сессии | Граничный | Токен/сессия недействительны после истечения TTL |
| FT-AUTH-007 | [ЗАПОЛНИТЬ: дополнительные сценарии MFA] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 7.2. Управление доступом

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-AC-001 | Доступ к ресурсу с разрешённой ролью | Позитивный | Доступ предоставлен |
| FT-AC-002 | Доступ к ресурсу с недостаточными правами | Негативный | Отказ в доступе (HTTP 403), событие зафиксировано в журнале |
| FT-AC-003 | Horizontal privilege escalation — доступ к данным другого пользователя той же роли | Негативный | Отказ в доступе |
| FT-AC-004 | Vertical privilege escalation — попытка выполнить действие более высокой роли | Негативный | Отказ в доступе |
| FT-AC-005 | Доступ к API без токена аутентификации | Негативный | HTTP 401, тело ответа не содержит чувствительных данных |
| FT-AC-006 | Проверка default deny — доступ к новому ресурсу без явного разрешения | Негативный | Отказ в доступе по умолчанию |
| FT-AC-007 | [ЗАПОЛНИТЬ: дополнительные сценарии RBAC/ABAC] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 7.3. Валидация ввода

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-INPUT-001 | Валидация корректного ввода — допустимые символы, длина | Позитивный | Ввод принят, обработан корректно |
| FT-INPUT-002 | Ввод, превышающий максимальную длину поля | Граничный | Ввод отклонён с информативным сообщением |
| FT-INPUT-003 | SQL injection payloads в текстовых полях | Негативный | Ввод санитизирован или отклонён; SQL-запрос не модифицирован |
| FT-INPUT-004 | XSS payloads в текстовых полях и URL-параметрах | Негативный | HTML-сущности экранированы; скрипт не выполняется |
| FT-INPUT-005 | Path traversal payloads (../../etc/passwd) | Негативный | Доступ ограничен рабочей директорией; traversal блокирован |
| FT-INPUT-006 | Null bytes, Unicode edge cases, control characters | Граничный | Ввод корректно обработан или отклонён |
| FT-INPUT-007 | Загрузка файлов — недопустимый MIME-type, превышение размера | Негативный | Файл отклонён, сервер стабилен |
| FT-INPUT-008 | [ЗАПОЛНИТЬ: SSRF, CRLF injection, template injection] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 7.4. Криптография

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-CRYPTO-001 | Шифрование данных — корректность работы алгоритма | Позитивный | Данные зашифрованы и расшифрованы без потерь |
| FT-CRYPTO-002 | Использование утверждённых алгоритмов (no deprecated ciphers) | Проверка конфигурации | Используются только ГОСТ/NIST-утверждённые алгоритмы |
| FT-CRYPTO-003 | Генерация ключей — проверка длины и энтропии | Проверка конфигурации | Ключи соответствуют минимальным требованиям длины |
| FT-CRYPTO-004 | Хеширование паролей — использование bcrypt/scrypt/argon2 | Проверка конфигурации | Пароли хешированы с salt, алгоритм и параметры соответствуют требованиям |
| FT-CRYPTO-005 | TLS-конфигурация — минимальная версия, cipher suites | Проверка конфигурации | TLS ≥ 1.2, только безопасные cipher suites |
| FT-CRYPTO-006 | [ЗАПОЛНИТЬ: дополнительные сценарии] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 7.5. Журналирование

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-LOG-001 | Фиксация успешной аутентификации | Позитивный | Запись в журнале: timestamp, user, action, result=success, source IP |
| FT-LOG-002 | Фиксация неудачной аутентификации | Позитивный | Запись в журнале: timestamp, attempted user, action, result=failure, source IP |
| FT-LOG-003 | Фиксация отказа в доступе | Позитивный | Запись в журнале: timestamp, user, resource, action, result=denied |
| FT-LOG-004 | Отсутствие чувствительных данных в журнале (пароли, токены, PII) | Негативный | Журнал не содержит паролей, токенов, персональных данных |
| FT-LOG-005 | Защита журнала от подделки (tamper protection) | Негативный | Журнал не может быть модифицирован пользователем приложения |
| FT-LOG-006 | [ЗАПОЛНИТЬ: ротация журналов, уровни логирования] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 7.6. Управление сессиями

| ID тест-кейса | Сценарий | Тип | Ожидаемый результат |
|-------------|---------|-----|-------------------|
| FT-SESS-001 | Создание сессии при аутентификации — уникальность session ID | Позитивный | Session ID уникален, достаточной длины и энтропии |
| FT-SESS-002 | Инвалидация сессии при logout | Позитивный | Сессия полностью уничтожена, повторное использование session ID невозможно |
| FT-SESS-003 | Timeout неактивной сессии | Граничный | Сессия истекает после [ЗАПОЛНИТЬ: N минут] неактивности |
| FT-SESS-004 | Concurrent sessions — ограничение одновременных сессий | Проверка конфигурации | [ЗАПОЛНИТЬ: разрешено N сессий / новая сессия инвалидирует предыдущую] |
| FT-SESS-005 | Session fixation — попытка навязать session ID | Негативный | Session ID обновляется после аутентификации |
| FT-SESS-006 | Cookie-атрибуты (Secure, HttpOnly, SameSite) | Проверка конфигурации | Cookies имеют атрибуты Secure, HttpOnly, SameSite=Strict/Lax |
| FT-SESS-007 | [ЗАПОЛНИТЬ: дополнительные сценарии] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

---

## 8. Управление тестовыми данными

### 8.1. Принципы управления тестовыми данными

| Принцип | Описание |
|---------|----------|
| **Изоляция** | Тестовые данные не пересекаются с production-данными; тестовые среды изолированы |
| **Воспроизводимость** | Тестовые данные генерируются детерминированно (seed-based) или хранятся как fixtures |
| **Безопасность** | Тестовые данные не содержат реальных персональных данных, паролей, секретов |
| **Маскирование** | При необходимости использования реальных данных — обязательное маскирование (anonymization) перед использованием |
| **Очистка** | Тестовые данные очищаются после завершения тестирования (teardown) |

### 8.2. Категории тестовых данных

| Категория | Описание | Способ подготовки | Хранение |
|-----------|----------|-------------------|----------|
| **Fixtures** | Статические наборы данных для повторяемых тестов | JSON/YAML файлы в VCS | `tests/fixtures/` в репозитории |
| **Generated** | Динамически генерируемые данные (faker, factory) | Seed-based генерация в тестовом коде | Генерируются при запуске тестов |
| **Masked production data** | Анонимизированные данные из production (при необходимости) | ETL pipeline с маскированием | [ЗАПОЛНИТЬ: secure storage] |
| **Специализированные security payloads** | XSS, SQLi, path traversal payloads для тестирования валидации | Заранее подготовленные наборы (OWASP SecLists) | `tests/security-payloads/` |

### 8.3. Правила обращения с тестовыми данными

| Правило | Описание |
|---------|----------|
| Запрет реальных credentials в тестах | Тесты используют mock-credentials или отдельные test accounts; никогда не используются production credentials |
| Запрет PII в fixtures | Fixtures содержат только синтетические данные; реальные ФИО, email, телефоны запрещены |
| Fixtures в VCS | Все тестовые fixtures хранятся в системе контроля версий и проходят code review |
| Cleanup после тестов | Каждый тест очищает созданные данные (teardown/afterEach); тесты не зависят от порядка выполнения |
| [ЗАПОЛНИТЬ: дополнительные правила] | [ЗАПОЛНИТЬ] |

---

## 9. Критерии приёмки

### 9.1. Целевые показатели покрытия

| Метрика | Целевое значение | Блокирует релиз |
|---------|-----------------|----------------|
| **Statement coverage (общий)** | [ЗАПОЛНИТЬ: ≥ 80%] | [ЗАПОЛНИТЬ: Да / Нет] |
| **Branch coverage (общий)** | [ЗАПОЛНИТЬ: ≥ 70%] | [ЗАПОЛНИТЬ] |
| **Coverage для security-модулей** | [ЗАПОЛНИТЬ: ≥ 90%] | Да |
| **Requirement coverage** | 100% требований безопасности (doc 05) покрыты тестами | Да |
| **Test pass rate** | [ЗАПОЛНИТЬ: 100% для P0/P1, ≥ 98% для P2/P3] | Да (для P0/P1) |

### 9.2. Pass/Fail критерии

| Критерий | Условие Pass | Условие Fail |
|----------|-------------|-------------|
| **Функции безопасности** | Все тест-кейсы P0 (раздел 7) пройдены | Хотя бы один P0 тест-кейс не пройден |
| **Покрытие требований** | Каждое требование безопасности из doc 05 покрыто и верифицировано | Существует непокрытое требование безопасности |
| **Критические дефекты** | 0 открытых дефектов Critical и High severity | Есть открытые Critical или High дефекты |
| **Регрессия** | Регрессионные тесты пройдены (раздел 10) | Обнаружена регрессия в ранее работающей функциональности |
| **Code coverage** | Покрытие ≥ целевого значения (раздел 9.1) | Покрытие ниже целевого значения |

### 9.3. Exit criteria (критерии завершения тестирования)

| Критерий | Описание |
|----------|----------|
| Все запланированные тест-кейсы выполнены | Не осталось тест-кейсов со статусом Not Executed (кроме intentionally skipped) |
| Все Critical/High дефекты исправлены и ретестированы | Нет открытых блокирующих дефектов |
| Матрица покрытия актуальна | Все требования безопасности имеют связанные пройденные тест-кейсы |
| Метрики достигнуты | Все целевые показатели из раздела 9.1 выполнены |
| Отчёт о тестировании подготовлен | Заполнен реестр результатов (раздел 13), сформирован отчёт |
| Согласование Security | [ЗАПОЛНИТЬ: Security Engineer подтвердил достаточность тестирования функций безопасности] |

---

## 10. Регрессионное тестирование

### 10.1. Стратегия регрессионного тестирования

| Аспект | Описание |
|--------|----------|
| **Цель** | Убедиться, что новые изменения не нарушили ранее работающую функциональность и функции безопасности |
| **Scope** | Полный набор автоматических тестов + критические ручные тесты функций безопасности |
| **Приоритизация** | При ограниченном времени — сначала тесты функций безопасности (P0), затем core-функциональность (P1), затем остальное |
| **Trigger** | Каждый push в основную ветку, каждый PR, перед каждым релизом |

### 10.2. Автоматизация регрессионного тестирования

| Уровень | Описание | Автоматизация | Время выполнения |
|---------|----------|---------------|-----------------|
| **Smoke tests** | Минимальный набор тестов: приложение запускается, ключевые эндпоинты доступны, аутентификация работает | 100% автоматизированы | [ЗАПОЛНИТЬ: ≤ 2 мин] |
| **Security regression** | Тесты функций безопасности из раздела 7 | [ЗАПОЛНИТЬ: ≥ 95%] автоматизированы | [ЗАПОЛНИТЬ: ≤ 10 мин] |
| **Full regression** | Полный набор unit + интеграционных тестов | [ЗАПОЛНИТЬ: ≥ 90%] автоматизированы | [ЗАПОЛНИТЬ: ≤ 30 мин] |
| **E2E regression** | End-to-end сценарии пользовательских потоков | [ЗАПОЛНИТЬ: ≥ 80%] автоматизированы | [ЗАПОЛНИТЬ: ≤ 60 мин] |

### 10.3. Управление набором регрессионных тестов

| Действие | Условие |
|----------|---------|
| **Добавление тест-кейса** | Каждый исправленный дефект сопровождается регрессионным тестом, предотвращающим повторное появление |
| **Удаление тест-кейса** | Тест более не релевантен (функциональность удалена); удаление согласуется с QA-лидом |
| **Обновление тест-кейса** | При изменении требований или интерфейсов; flaky-тесты исправляются или помечаются |
| **Ревизия набора** | [ЗАПОЛНИТЬ: ежеквартально] — удаление дублирующих тестов, оптимизация времени выполнения |

---

## 11. Интеграция в CI/CD

### 11.1. Pipeline тестирования

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — обеспечить регулярное выполнение функциональных тестов.

| Этап CI/CD | Тесты | Trigger | Quality Gate |
|-----------|-------|---------|-------------|
| **Pre-commit (local)** | Unit-тесты для изменённых файлов, lint | `git commit` (pre-commit hook) | Все тесты пройдены |
| **PR check** | Full unit + интеграционные тесты + coverage | Push в PR branch | Coverage ≥ target, 0 failures |
| **Merge to development** | Full regression + E2E smoke | Merge PR | Все тесты пройдены |
| **Pre-release** | Full regression + E2E + security тесты (раздел 7) | Release branch / tag | Все критерии приёмки (раздел 9) выполнены |
| **Post-deploy** | Smoke-тесты в production-like среде | После деплоя | Все smoke-тесты пройдены |

### 11.2. Quality gates

| Gate | Условие блокировки | Действие при блокировке |
|------|-------------------|----------------------|
| **Coverage gate** | Coverage ниже целевого значения | PR не может быть смержен |
| **Test failure gate** | Хотя бы один тест failed | PR не может быть смержен |
| **Security test gate** | Тест функций безопасности (P0) failed | PR не может быть смержен; уведомление Security |
| **Flaky test gate** | Тест нестабилен (> [ЗАПОЛНИТЬ: 3%] flakiness) | Тест помечен для исправления; не блокирует PR, но создаётся задача |
| **New code coverage** | Новый код имеет coverage ниже [ЗАПОЛНИТЬ: 80%] | PR не может быть смержен |

### 11.3. Конфигурация CI/CD

| Параметр | Значение |
|----------|----------|
| CI/CD платформа | [ЗАПОЛНИТЬ: GitHub Actions / GitLab CI / Jenkins] |
| Параллельность тестов | [ЗАПОЛНИТЬ: количество parallel workers] |
| Timeout на тестовый job | [ЗАПОЛНИТЬ: 30 мин / 60 мин] |
| Артефакты | JUnit XML reports, HTML coverage reports, screenshots (для E2E) |
| Уведомления о сбоях | [ЗАПОЛНИТЬ: Slack / email / GitHub notifications] |

---

## 12. Метрики и отчётность

### 12.1. Метрики тестирования

| Метрика | Описание | Формула / Источник | Целевое значение | Периодичность |
|---------|----------|-------------------|-----------------|---------------|
| **Code coverage (statement)** | Процент строк кода, исполненных тестами | Coverage tool (coverage.py, c8, istanbul) | [ЗАПОЛНИТЬ: ≥ 80%] | Каждый PR |
| **Code coverage (branch)** | Процент ветвлений, покрытых тестами | Coverage tool | [ЗАПОЛНИТЬ: ≥ 70%] | Каждый PR |
| **Test pass rate** | Процент успешно пройденных тестов | Passed / (Passed + Failed) × 100% | [ЗАПОЛНИТЬ: ≥ 99%] | Каждый запуск |
| **Defect escape rate** | Доля дефектов, обнаруженных после релиза | Post-release defects / Total defects × 100% | [ЗАПОЛНИТЬ: ≤ 5%] | Ежемесячно |
| **Requirement coverage** | Процент требований безопасности, покрытых тестами | Covered requirements / Total requirements × 100% | 100% | Каждый релиз |
| **Test execution time** | Время выполнения полного набора тестов | CI/CD metrics | [ЗАПОЛНИТЬ: ≤ 30 мин] | Еженедельно |
| **Flaky test rate** | Доля нестабильных тестов | Flaky tests / Total tests × 100% | [ЗАПОЛНИТЬ: ≤ 2%] | Еженедельно |
| **Defect density (security)** | Количество дефектов безопасности на 1000 строк кода | Security defects / KLOC | [ЗАПОЛНИТЬ: ≤ 1.0] | Ежеквартально |

### 12.2. Формат отчёта о тестировании

| Раздел отчёта | Содержание |
|---------------|-----------|
| **Общие сведения** | Версия продукта, период тестирования, тестовая среда, состав команды |
| **Scope тестирования** | Перечень протестированных компонентов и функций, исключения |
| **Результаты** | Сводка: total/passed/failed/skipped/error; результаты по типам тестирования |
| **Покрытие** | Code coverage (statement, branch), requirement coverage, матрица покрытия |
| **Дефекты** | Сводка обнаруженных дефектов по severity, статус исправления, open defects |
| **Функции безопасности** | Детальные результаты тестирования функций безопасности (раздел 7) |
| **Метрики** | Значения метрик из раздела 12.1, тренды по сравнению с предыдущим циклом |
| **Риски и ограничения** | Непокрытые области, known issues, ограничения тестирования |
| **Заключение** | Рекомендация: готовность / неготовность к релизу, условия |

### 12.3. Периодичность отчётов

| Тип отчёта | Периодичность | Аудитория |
|-----------|---------------|-----------|
| **CI/CD отчёт** | Автоматически при каждом запуске | Разработчики |
| **PR coverage отчёт** | Автоматически при каждом PR | Разработчики, reviewer |
| **Отчёт о релизе** | Перед каждым релизом | Техлид, Security, руководство |
| **Сводный отчёт** | [ЗАПОЛНИТЬ: ежемесячно / ежеквартально] | Руководство, Security |

---

## 13. Реестр результатов тестирования

### 13.1. Формат реестра

> Требование ГОСТ Р 56939-2024, п. 5.18.2 — регистрировать ход тестирования и фиксировать результаты.

| ID | Тест-кейс | Компонент | Тип тестирования | Результат | Severity дефекта | Описание дефекта | ID дефекта (doc 04) | Среда | Дата | Тестировщик |
|----|----------|-----------|------------------|-----------|-----------------|-----------------|-------------------|------|------|------------|
| FT-001 | [ЗАПОЛНИТЬ: FT-AUTH-001] | [ЗАПОЛНИТЬ: модуль аутентификации] | [ЗАПОЛНИТЬ: Unit / Integration / System] | [ЗАПОЛНИТЬ: Passed / Failed] | [ЗАПОЛНИТЬ: — / Critical / High / Medium / Low] | [ЗАПОЛНИТЬ: нет / описание дефекта] | [ЗАПОЛНИТЬ: — / DEF-2024-XXX] | [ЗАПОЛНИТЬ: CI / Staging] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| FT-002 | [ЗАПОЛНИТЬ: FT-AUTH-002] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| FT-003 | [ЗАПОЛНИТЬ: FT-AC-001] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| FT-004 | [ЗАПОЛНИТЬ: FT-INPUT-001] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |
| FT-005 | [ЗАПОЛНИТЬ: FT-CRYPTO-001] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] | [ЗАПОЛНИТЬ] |

### 13.2. Статусы результатов

| Статус | Описание | Действие |
|--------|----------|----------|
| **Passed** | Тест-кейс пройден успешно, фактический результат совпадает с ожидаемым | Нет дополнительных действий |
| **Failed** | Тест-кейс не пройден, обнаружен дефект | Создать дефект в трекере (документ 04), указать severity |
| **Blocked** | Тест-кейс не может быть выполнен из-за внешней зависимости (среда, данные, другой дефект) | Устранить блокирующий фактор, повторить |
| **Skipped** | Тест-кейс пропущен намеренно (неприменим для данной конфигурации/версии) | Задокументировать причину пропуска |
| **Error** | Тест-кейс не может быть выполнен из-за ошибки в тестовой инфраструктуре | Исправить инфраструктуру, повторить |

### 13.3. Хранение и доступ к реестру

| Параметр | Значение |
|----------|----------|
| Место хранения реестра | [ЗАПОЛНИТЬ: CI/CD автоматические отчёты (JUnit XML) + Confluence / внутренняя wiki для ручных тестов] |
| Доступ к реестру | [ЗАПОЛНИТЬ: QA, Security, техлид, разработчики — read; QA — read/write] |
| Срок хранения записей | [ЗАПОЛНИТЬ: не менее 3 лет / срок действия сертификата + 1 год] |
| Автоматизация | [ЗАПОЛНИТЬ: CI/CD автоматически публикует результаты; ручные тесты вносятся QA] |

---

## 14. История изменений

| Версия | Дата | Описание изменений | Автор |
|--------|------|--------------------|-------|
| 1.0 | [ЗАПОЛНИТЬ: дата] | Первая версия документа | [ЗАПОЛНИТЬ: ФИО] |